import{o as a,c as l,a as o,w as C,v as A,b,t as y,d as u,F as m,r as v,n as P,e as w,f as S,g as B}from"./vendor.5f460242.js";const I=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))d(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const h of i.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&d(h)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function d(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}};I();class k{constructor(t,n){this.lat=t,this.lng=n}}class _{constructor(t,n,d,s,i,h,c,g,f){this.location=t,this.googleId=n,this.name=d,this.imgSrc=s,this.rating=i,this.priceClass=h,this.userRatings=c,this.address=g,this.photos=f}}var L=(e,t)=>{const n=e.__vccOpts||e;for(const[d,s]of t)n[d]=s;return n};const N={data:function(){return{pubs:[],chosenArray:[],pageArray:new Array(3),listSectionTheme:"minimized",divListTheme:"show-potentials",ifRatingExists:!0,ifPriceExists:!0,ifImageExists:!0,menuButtonHidden:!0,popupDivHidden:!0,globalPopup:_,getNextPage:null,pageCounter:0,showHide:"SHOW",pubListVisible:!0,map:null,googleSearchService:null,googleGeoCoder:null,directionsRenderer:new window.google.maps.DirectionsRenderer({preserveViewport:!0}),directionsService:new window.google.maps.DirectionsService}},mounted:function(){if(this.initMap(),this.geoLocate(),localStorage.getItem("chosenArray"))try{let e=JSON.parse(localStorage.getItem("chosenArray"));for(let t=0;t<e.length;t++)this.chosenArray[t]=new _(e[t].location,e[t].googleId,e[t].name,e[t].imgSrc,e[t].rating,e[t].priceClass,e[t].userRatings,e[t].address)}catch{localStorage.removeItem("chosenArray")}},watch:{chosenArray:{handler(e){const t=JSON.stringify(e);localStorage.setItem("chosenArray",t)},deep:!0}},methods:{initMap(){this.map=new window.google.maps.Map(document.getElementById("map"),{zoom:14,disableDefaultUI:!0,fullscreenControl:!0}),this.directionsRenderer.setMap(this.map),this.googleSearchService=new window.google.maps.places.PlacesService(this.map),this.googleGeoCoder=new window.google.maps.Geocoder},async searchByName(){let e={address:this.placeName};this.googleGeoCoder.geocode(e,n);const t=this;function n(d,s){if(s=="OK"){const i=d[0].geometry.location;t.searchByGeoLocation(i),document.querySelector("#response-title em").textContent=t.placeName,t.resetPageButtons()}else t.notifyUser("No place found")}},async searchByGeoLocation(e){let t={radius:"3000",location:e,type:"bar"};this.googleSearchService.textSearch(t,d);const n=this;function d(s,i,h){if(n.pubs=[],i==google.maps.places.PlacesServiceStatus.OK){for(let c=0;c<s.length;c++){const g=new k(s[c].geometry.location.lat(),s[c].geometry.location.lng()),f="photos"in s[c]?s[c].photos[0].getUrl({maxHeight:1e3}):n.defaultPubPic;n.pubs.push(new _(g,s[c].place_id,s[c].name,f,s[c].rating,s[c].price_level,s[c].user_ratings_total,s[c].formatted_address))}h&&h.hasNextPage?n.getNextPage=()=>{h.nextPage(),n.pageCounter++}:n.getNextPage=null,n.nearYouButton()}for(let c=0;c<n.pubs.length;c++)n.pageArray[n.pageCounter].push(n.pubs[c])}this.moveMapTo(e)},moveMapTo(e){this.map.panTo(e)},addPub(e){for(let t of this.chosenArray)if(t.name===e.name){this.notifyUser("Pub already added");return}this.chosenArray.push(e),this.notifyUser("Pub added to crawl list")},removePub(e){for(let t=0;t<this.chosenArray.length;t++)this.chosenArray[t]===e&&this.chosenArray.splice(t,1)},async calculateAndDispalyRoutes(e=!1){const t=[];for(let d=1;d<this.chosenArray.length-1;d++)t.push({location:{placeId:this.chosenArray[d].googleId},stopover:!0});const n=this;this.directionsService.route({origin:{placeId:this.chosenArray[0].googleId},destination:{placeId:this.chosenArray[this.chosenArray.length-1].googleId},waypoints:t,optimizeWaypoints:e,travelMode:google.maps.TravelMode.WALKING}).then(d=>{if(e)for(let s=1;s<d.geocoded_waypoints.length-1;s++){let i=n.chosenArray.findIndex(h=>h.googleId===d.geocoded_waypoints[s].place_id);n.moveItem(i,s)}for(let s=0;s<d.routes[0].legs.length;s++)d.routes[0].legs[s].end_address=n.chosenArray[s+1].name,d.routes[0].legs[s].start_address=n.chosenArray[s].name,n.chosenArray[s+1].distance=d.routes[0].legs[s].distance.text;this.directionsRenderer.setDirections(d)})},removeRoute(){this.directionsRenderer.set("directions",null)},geoLocate(){let e=this;function t(d){d=new k(d.coords.latitude,d.coords.longitude),e.moveMapTo(d),e.searchByGeoLocation(d)}function n(){e.notifyUser("Unable to retrieve your location")}navigator.geolocation?(navigator.geolocation.getCurrentPosition(t,n),document.querySelector("#response-title em").textContent="you",this.resetPageButtons()):notifyUser("Geolocation is not supported by your browser")},showAndHidePubs(){this.pubListVisible===!0?(this.showHide="HIDE",this.listSectionTheme="maximized",this.pubListVisible=!1):(document.querySelector("#show-hide").textContent="SHOW",this.showHide="SHOW",this.listSectionTheme="minimized",this.pubListVisible=!0)},forceShowPubs(){this.showHide="HIDE",this.listSectionTheme="maximized",this.pubListVisible=!1},nearYouButton(){this.forceShowPubs(),this.divListTheme="show-potentials",document.querySelector("#response-list").classList.add("selected-list"),document.querySelector("#chosen-list").classList.remove("selected-list"),this.menuButtonHidden=!1},chosenButton(){this.menuButtonHidden=!0,this.forceShowPubs(),this.divListTheme="show-chosenones",document.querySelector("#response-list").classList.remove("selected-list"),document.querySelector("#chosen-list").classList.add("selected-list")},notifyUser(e){const t=document.querySelector("#notification");t.classList.add("animate"),t.textContent=e,setTimeout(function(){t.classList.remove("animate"),t.textContent=""},3e3)},showPopup(e){this.globalPopup=e,this.popupDivHidden=!1,e.userRatings==0&&(this.ifRatingExists=!1),e.priceClass==null&&(this.ifPriceExists=!1),e.imgSrc==null&&(this.ifImageExists=!1)},hidePopup(){this.popupDivHidden=!0,this.ifRatingExists=!0,this.ifPriceExists=!0,this.ifImageExists=!0},moveItem(e,t){const n=this.chosenArray.splice(e,1)[0];this.chosenArray.splice(t,0,n)},moveUp(e){const t=this.chosenArray.indexOf(e);t!=0&&this.moveItem(t,t-1)},moveDown(e){const t=this.chosenArray.indexOf(e);t!==this.chosenArray.length&&this.moveItem(t,t+1)},nextPage(){this.pageArray[this.pageCounter+1].length>0?this.pageCounter++:this.getNextPage&&this.getNextPage()},resetPageButtons(){this.pageCounter=0;for(let e=0;e<this.pageArray.length;e++)this.pageArray[e]=[]}}},H=o("section",{id:"map-container"},[o("div",{id:"map"})],-1),R={id:"search-section"},D={id:"search-box"},E={id:"search-form"},O=o("div",{id:"notification"},null,-1),T={key:0,id:"popup-section"},M={class:"popup"},q={key:0},U={key:1,class:"starDiv"},V=w(" Price class: "),z=o("strong",null,"$",-1),G=[z],$=o("strong",null,"$",-1),x=[$],W=o("hr",null,null,-1),F={key:2},Y={key:3,class:"starDiv"},j=w(" Rating: "),K=o("span",{class:"fa fa-star checked"},null,-1),J=[K],Z=o("span",{id:"star-not-checked",class:"fa fa-star"},null,-1),Q=[Z],X=["src"],ee={key:5,src:"https://as2.ftcdn.net/v2/jpg/02/55/54/87/1000_F_255548787_NN93IpmZ29kRmNfy8OYWvSqLYSm1VCTj.jpg"},te={id:"response-list",class:"list"},se=o("p",null,[w(" Pubs near "),o("em",null,[o("b",null,"you")])],-1),oe=[se],ie={key:0},ne={class:"icon-name"},re={key:0,class:"searchbar-button material-icons md48 beer-colored"},ae=["onClick"],le=["onClick"],de={key:1},ce=["disabled"],ue=o("span",{class:"material-icons-outlined"}," chevron_left ",-1),he=[ue],pe=["disabled"],me=o("span",{class:"material-icons-outlined"}," chevron_right ",-1),ge=[me],fe={id:"chosen-list",class:"list"},ye={id:"switch-buttons"},ve=o("p",null,"Planned Crawl",-1),be=[ve],_e={key:0},we=["onClick"],Pe={class:"order-pubs"},ke=["onClick"],Ce=["onClick"],Ae=o("div",{class:"end-start"},null,-1),Se=["onClick"],Be={key:1},Ie=["disabled"],Le=["disabled"],Ne=["disabled"];function He(e,t,n,d,s,i){var h,c,g,f;return a(),l(m,null,[H,o("section",R,[o("div",D,[o("form",E,[C(o("input",{id:"search-field",type:"search",placeholder:"Find you target town","onUpdate:modelValue":t[0]||(t[0]=r=>e.placeName=r),autocomplete:"off"},null,512),[[A,e.placeName]]),o("button",{onClick:t[1]||(t[1]=b(r=>i.searchByName(),["prevent"])),id:"search-button",class:"searchbar-button material-icons md48 beer-colored"}," sports_bar "),o("button",{onClick:t[2]||(t[2]=b(r=>i.geoLocate(),["prevent"])),class:"searchbar-button material-icons md24 beer-colored"}," my_location ")])]),O]),e.popupDivHidden?u("",!0):(a(),l("section",T,[o("div",M,[o("button",{class:"popup-close-button",onClick:t[3]||(t[3]=r=>i.hidePopup(e.result))},"\u2716"),o("p",null,[o("strong",null,y(e.globalPopup.name),1)]),o("p",null,y(e.globalPopup.address),1),e.ifPriceExists?u("",!0):(a(),l("div",q,"No price class...")),e.ifPriceExists?(a(),l("div",U,[V,(a(!0),l(m,null,v(Math.round(e.globalPopup.priceClass),r=>(a(),l("div",{class:"price-class-a",key:r},G))),128)),(a(!0),l(m,null,v(5-Math.round(e.globalPopup.priceClass),r=>(a(),l("div",{key:r,class:"price-class-b"},x))),128))])):u("",!0),W,e.ifRatingExists?u("",!0):(a(),l("div",F,"No rating...")),e.ifRatingExists?(a(),l("div",Y,[j,(a(!0),l(m,null,v(Math.floor(e.globalPopup.rating),r=>(a(),l("div",{key:r},J))),128)),(a(!0),l(m,null,v(5-Math.floor(e.globalPopup.rating),r=>(a(),l("div",{key:r},Q))),128))])):u("",!0),o("p",null,"Number of ratings: "+y(e.globalPopup.userRatings),1),e.ifImageExists?(a(),l("img",{key:4,src:e.globalPopup.imgSrc},null,8,X)):u("",!0),e.ifImageExists?u("",!0):(a(),l("img",ee))])])),o("section",{id:"list-section",class:P(e.listSectionTheme)},[o("div",{id:"show-hide",class:"beer-colored",onClick:t[4]||(t[4]=r=>i.showAndHidePubs())},y(e.showHide),1),o("div",{id:"div-list",class:P(e.divListTheme)},[o("div",te,[o("button",{id:"response-title",class:"switch-button",onClick:t[5]||(t[5]=r=>i.nearYouButton(this))},oe),e.menuButtonHidden?u("",!0):(a(),l("ul",ie,[(a(!0),l(m,null,v(e.pageArray[e.pageCounter],r=>(a(),l("li",{key:r.name},[o("div",ne,[e.chosenArray.some(p=>p.name==r.name)?(a(),l("i",re,"done")):u("",!0),o("p",{class:"li-name",onClick:p=>i.showPopup(r)},y(r.name),9,ae)]),o("button",{class:"add-remove-button",onClick:p=>i.addPub(r)},"+",8,le)]))),128))])),e.listSectionTheme=="maximized"?(a(),l("div",de,[e.menuButtonHidden?u("",!0):(a(),l("button",{key:0,disabled:e.pageCounter==0,onClick:t[6]||(t[6]=r=>e.pageCounter--),id:"previousButton",class:"menuButton"},he,8,ce)),e.menuButtonHidden?u("",!0):(a(),l("button",{key:1,onClick:t[7]||(t[7]=r=>i.nextPage()),disabled:!e.pageArray[e.pageCounter+1]||((h=e.pageArray[e.pageCounter+1])==null?void 0:h.length)<1&&!e.getNextPage,id:"nextButton",class:"menuButton"},ge,8,pe))])):u("",!0)]),o("div",fe,[o("div",ye,[o("button",{id:"switch-1",class:"switch-button",onClick:t[8]||(t[8]=r=>i.chosenButton())},be)]),e.menuButtonHidden?(a(),l("ul",_e,[(a(!0),l(m,null,v(e.chosenArray,r=>(a(),l("li",{key:r.name},[o("p",{onClick:p=>i.showPopup(r)},y(r.name),9,we),o("div",Pe,[o("span",{class:"material-icons",onClick:p=>i.moveUp(r)},"expand_less",8,ke),o("span",{class:"material-icons",onClick:p=>i.moveDown(r)},"expand_more",8,Ce),Ae]),o("button",{class:"add-remove-button",onClick:p=>i.removePub(r)}," - ",8,Se)]))),128))])):u("",!0),e.listSectionTheme=="maximized"?(a(),l("div",Be,[e.menuButtonHidden?(a(),l("button",{key:0,disabled:((c=e.chosenArray)==null?void 0:c.length)==0,id:"switch-2",class:"menuButton",type:"button",onClick:t[9]||(t[9]=b(r=>i.calculateAndDispalyRoutes(!1),["prevent"])),title:"Display pub crawl route"}," Show Route ",8,Ie)):u("",!0),e.menuButtonHidden?(a(),l("button",{key:1,disabled:((g=e.chosenArray)==null?void 0:g.length)==0,id:"switch-3",class:"menuButton",type:"button",onClick:t[10]||(t[10]=b(r=>i.calculateAndDispalyRoutes(!0),["prevent"])),title:"Optimize walking route between the pubs which is not start or end-pubs"}," Optimize ",8,Le)):u("",!0),e.menuButtonHidden?(a(),l("button",{key:2,disabled:((f=e.chosenArray)==null?void 0:f.length)==0,id:"switch-4",class:"menuButton",onClick:t[11]||(t[11]=r=>i.removeRoute()),title:"Remove displayed route from map"}," Remove ",8,Ne)):u("",!0)])):u("",!0)])],2)],2)],64)}var Re=L(N,[["render",He]]);const De={data:function(){return{}},methods:{}},Ee=Object.assign(De,{setup(e){return(t,n)=>(a(),S(Re))}});B(Ee).mount("#app");
